# --- Configuration ----------------------------------------------------------

_subdirectory: "template"

# --- Questions --------------------------------------------------------------

rule_name:
  type: str
  help: "The name of the rule to be created."
  validator: >-
    {% if not (rule_name | regex_search('^[a-zA-Z_][a-zA-Z0-9_]*$')) %}
      The rule name must start with a letter or underscore and can only contain letters, numbers, and underscores.
    {% endif %}

uses_package:
  type: bool
  help: "Whether the rule uses the project's python package or not."

module_type:
  type: str
  help: "The type of module where the rule will be implemented."
  choices:
    - "datasets"
    - "features"
    - "models"
  when: "{{ uses_package }}"

module_name:
  type: str
  help: "The name of the module where the rule will be implemented."
  validator: >-
    {% if not (module_name | regex_search('^[a-zA-Z_][a-zA-Z0-9_]*$')) %}
      The module name must start with a letter or underscore and can only contain letters, numbers, and underscores.
    {% endif %}
  when: "{{ uses_package }}"
  # TODO-copier-rule Validate against existing module names in the project.


# --- Post-configuration -----------------------------------------------------

_answers_file: >-
  ./copier-answers/rule-{{ rule_name }}.yaml
